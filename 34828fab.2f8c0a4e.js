(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{100:function(e,t,n){"use strict";var a=n(0),r=n(101);t.a=function(){var e=Object(a.useContext)(r.a);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},101:function(e,t,n){"use strict";var a=n(0),r=Object(a.createContext)(void 0);t.a=r},106:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(100),c=n(96),l=n(55),s=n.n(l),i=37,u=39;t.a=function(e){var t=e.lazy,n=e.block,l=e.defaultValue,b=e.values,p=e.groupId,d=e.className,m=Object(o.a)(),f=m.tabGroupChoices,j=m.setTabGroupChoices,O=Object(a.useState)(l),y=O[0],h=O[1],g=a.Children.toArray(e.children);if(null!=p){var v=f[p];null!=v&&v!==y&&b.some((function(e){return e.value===v}))&&h(v)}var N=function(e){h(e),null!=p&&j(p,e)},w=[];return r.a.createElement("div",null,r.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:Object(c.a)("tabs",{"tabs--block":n},d)},b.map((function(e){var t=e.value,n=e.label;return r.a.createElement("li",{role:"tab",tabIndex:0,"aria-selected":y===t,className:Object(c.a)("tabs__item",s.a.tabItem,{"tabs__item--active":y===t}),key:t,ref:function(e){return w.push(e)},onKeyDown:function(e){!function(e,t,n){switch(n.keyCode){case u:!function(e,t){var n=e.indexOf(t)+1;e[n]?e[n].focus():e[0].focus()}(e,t);break;case i:!function(e,t){var n=e.indexOf(t)-1;e[n]?e[n].focus():e[e.length-1].focus()}(e,t)}}(w,e.target,e)},onFocus:function(){return N(t)},onClick:function(){N(t)}},n)}))),t?Object(a.cloneElement)(g.filter((function(e){return e.props.value===y}))[0],{className:"margin-vert--md"}):r.a.createElement("div",{className:"margin-vert--md"},g.map((function(e,t){return Object(a.cloneElement)(e,{key:t,hidden:e.props.value!==y})}))))}},107:function(e,t,n){"use strict";var a=n(0),r=n.n(a);t.a=function(e){var t=e.children,n=e.hidden,a=e.className;return r.a.createElement("div",{role:"tabpanel",hidden:n,className:a},t)}},76:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return s})),n.d(t,"metadata",(function(){return i})),n.d(t,"toc",(function(){return u})),n.d(t,"default",(function(){return p}));var a=n(3),r=n(7),o=(n(0),n(94)),c=n(106),l=n(107),s={id:"c2b",title:"Customer to bussiness transactions",description:"Customer to bussines transactions fundamentals"},i={unversionedId:"tutorials/c2b",id:"tutorials/c2b",isDocsHomePage:!1,title:"Customer to bussiness transactions",description:"Customer to bussines transactions fundamentals",source:"@site/docs/tutorials/c2b.md",slug:"/tutorials/c2b",permalink:"/node-pesa/tutorials/c2b",editUrl:"https://github.com/openpesa/pesa-js/edit/main/docs/tutorials/c2b.md",version:"current",sidebar:"someSidebar",previous:{title:"Typescript Support",permalink:"/node-pesa/guide/typescript"},next:{title:"Bussiness to customer",permalink:"/node-pesa/tutorials/b2c"}},u=[{value:"How to transact from customer to business",id:"how-to-transact-from-customer-to-business",children:[]},{value:"Example Full",id:"example-full",children:[]}],b={toc:u};function p(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},b,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"how-to-transact-from-customer-to-business"},"How to transact from customer to business"),Object(o.b)("p",null,"In this course, we will cover what you need to transact from customers to businesses using Node.js."),Object(o.b)("p",null,"First, we set up the application in the portal."),Object(o.b)("p",null,"When building apps on the sandbox environment, Using the sandbox credentials allows us to test our application logic without incurring any costs."),Object(o.b)("p",null,"We will import the required libraries which have already been pre-installed."),Object(o.b)("p",null,"Here\u2019s the code that does this:"),Object(o.b)(c.a,{defaultValue:"commonjs",values:[{label:"CommonJS",value:"commonjs"},{label:"ES Modules",value:"es"}],mdxType:"Tabs"},Object(o.b)(l.a,{value:"commonjs",mdxType:"TabItem"},Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-sh"},"const { Pesa } = require('@openpesa/pesa-js');\n"))),Object(o.b)(l.a,{value:"es",mdxType:"TabItem"},Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-sh"},"import { Pesa } from '@openpesa/pesa-js';  \n")))),Object(o.b)("p",null,"The above code imports the Pesa SDK for us."),Object(o.b)("p",null,"Next, we set our app credentials."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},"let apiKey = 'your_API_key';\nlet publicKey = 'your_public_key';\n")),Object(o.b)("p",null,"These are the credentials that we use to authenticate requests to the Mpesa OpenAPI service."),Object(o.b)("p",null,"Now we are going to initialize the Pesa SDK."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},"cosnt pesa = new Pesa({\n    'api_key' : apiKey,\n    'public_key' : publicKey,\n}, 'sandbox');\n\n")),Object(o.b)("p",null,"We have just required the Pesa module into our app and assigned it to the ",Object(o.b)("inlineCode",{parentName:"p"},"pesa")," variable. We initialize it with our ",Object(o.b)("inlineCode",{parentName:"p"},"api_key")," and ",Object(o.b)("inlineCode",{parentName:"p"},"public_key")," which will be used to make authenticated transactions. Easy right?"),Object(o.b)("p",null,"Now let\u2019s set up our transaction."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},"let data = {\n    input_Amount: 5000,\n    input_CustomerMSISDN: '000000000001',\n    input_Country: 'TZN',\n    input_Currency: 'TZS',\n    input_ServiceProviderCode: '000000',\n    input_TransactionReference: 'T12344Z',\n    input_ThirdPartyConversationID: '1e9b774d1da34af78412a498cbc28f5d',\n    input_PurchasedItemsDesc: 'Test Three Item',\n};\n")),Object(o.b)("p",null,"To transact from customer to business, you need the following:"),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",{parentName:"tr",align:null},"Attribute"),Object(o.b)("th",{parentName:"tr",align:null},"Desccription"),Object(o.b)("th",{parentName:"tr",align:null},"default"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"Amount"),Object(o.b)("td",{parentName:"tr",align:null},"An Amount"),Object(o.b)("td",{parentName:"tr",align:null})),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"CustomerMSISDN"),Object(o.b)("td",{parentName:"tr",align:null},"A CustomerMSISDN"),Object(o.b)("td",{parentName:"tr",align:null})),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"Country"),Object(o.b)("td",{parentName:"tr",align:null},"Country"),Object(o.b)("td",{parentName:"tr",align:null},"TZN")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"Currency"),Object(o.b)("td",{parentName:"tr",align:null},"Currency"),Object(o.b)("td",{parentName:"tr",align:null},"TZS")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"ServiceProviderCode"),Object(o.b)("td",{parentName:"tr",align:null},"Service Provider Code"),Object(o.b)("td",{parentName:"tr",align:null})),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"TransactionReference"),Object(o.b)("td",{parentName:"tr",align:null},"Transaction Reference"),Object(o.b)("td",{parentName:"tr",align:null},"random number")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",{parentName:"tr",align:null},"ThirdPartyConversationID"),Object(o.b)("td",{parentName:"tr",align:null},"Purchased Items Desc"),Object(o.b)("td",{parentName:"tr",align:null},"random number")))),Object(o.b)("p",null,"Next, we have a function to execute the transaction right below the ",Object(o.b)("inlineCode",{parentName:"p"},"// Execute transaction")," line."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},"// Execute transaction\npesa.c2b(data)\n    .then((data) => {\n        // print results\n        console.log(data);\n    })\n    .catch((er) => {\n        // print error\n        console.log(er.data);\n    });\n")),Object(o.b)("p",null,"If the code works and the transaction is successful, it will print the response onto the console logs. If it\u2019s not successful, it will print out an error instead."),Object(o.b)("p",null,"Sample response"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-json"},"{\n  output_ResponseCode: 'INS-0',\n  output_ResponseDesc: 'Request processed successfully',\n  output_TransactionID: 'o3FgzDqPV8pZ',\n  output_ConversationID: '93a87b6f06074fba92d14bda995b21b12',\n  output_ThirdPartyConversationID: 'rerekf'\n}\n")),Object(o.b)("p",null,"You\u2019re all set!"),Object(o.b)("h2",{id:"example-full"},"Example Full"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},"const { Pesa } = require('@openpesa/pesa-js');\n\nlet publicKey = '';\nlet apiKey = '';\n\nlet pesa = new Pesa({\n    api_key: apiKey,\n    public_key: publicKey,\n},'sandbox');\n\nlet data = {\n    input_Amount: 5000,\n    input_CustomerMSISDN: '000000000001',\n    input_Country: 'TZN',\n    input_Currency: 'TZS',\n    input_ServiceProviderCode: '000000',\n    input_TransactionReference: 'T12344Z',\n    input_ThirdPartyConversationID: '1e9b774d1da34af78412a598cbc28f5d',\n    input_PurchasedItemsDesc: 'Test Three Item',\n};\n\npesa.c2b(data)\n    .then((data) => {\n        console.log(data);\n    })\n    .catch((er) => {\n        console.log(er.data);\n    });\n")),Object(o.b)("p",null,"Happy Coding!! \ud83d\ude00"))}p.isMDXComponent=!0},94:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return m}));var a=n(0),r=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=r.a.createContext({}),u=function(e){var t=r.a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},b=function(e){var t=u(e.components);return r.a.createElement(i.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},d=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,i=s(e,["components","mdxType","originalType","parentName"]),b=u(n),d=a,m=b["".concat(c,".").concat(d)]||b[d]||p[d]||o;return n?r.a.createElement(m,l(l({ref:t},i),{},{components:n})):r.a.createElement(m,l({ref:t},i))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,c=new Array(o);c[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,c[1]=l;for(var i=2;i<o;i++)c[i]=n[i];return r.a.createElement.apply(null,c)}return r.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},96:function(e,t,n){"use strict";function a(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=a(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}t.a=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=a(e))&&(r&&(r+=" "),r+=t);return r}}}]);